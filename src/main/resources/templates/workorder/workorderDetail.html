<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/defaultLayout}">
<head>
    <title>Work Order Detail</title>
</head>
<body>
<div layout:fragment="content">
    <div class="max-w-4xl mx-auto mt-8 space-y-6 print:p-4">

        <div class="flex justify-between items-center">
            <h2 class="text-2xl font-bold">Work Order Detail</h2>
            <button type="button" onclick="window.print()"
                    class="px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 print:hidden">
                <i class="fas fa-print mr-1"></i> Print
            </button>
        </div>

        <!-- 기본 정보 -->
        <div class="border rounded-lg shadow p-4 space-y-3">
            <h3 class="font-semibold text-lg mb-2">Basic Information</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <span class="font-medium">Order ID:</span>
                    <span th:text="${workorder.orderId}"></span>
                </div>
                <div>
                    <span class="font-medium">Order Name:</span>
                    <span th:text="${workorder.orderName}"></span>
                </div>
                <div>
                    <span class="font-medium">Plant ID:</span>
                    <span th:text="${workorder.plantId}"></span>
                </div>
                <div>
                    <span class="font-medium">Job Type:</span>
                    <span th:text="${workorder.jobType}"></span>
                </div>
                <div>
                    <span class="font-medium">Dept:</span>
                    <span th:text="${workorder.dept}"></span>
                </div>
                <div>
                    <span class="font-medium">Schedule Date:</span>
                    <span th:text="${workorder.scheduleDate != null ? #temporals.format(workorder.scheduleDate, 'yyyy-MM-dd HH:mm') : ''}"></span>
                </div>
                <div class="md:col-span-2">
                    <span class="font-medium">Note:</span>
                    <span th:text="${workorder.note}"></span>
                </div>
            </div>
        </div>

        <!-- 작업 항목 -->
        <div class="border rounded-lg shadow p-4 space-y-3">
            <h3 class="font-semibold text-lg mb-2">Work Order Items</h3>
            <div class="overflow-x-auto">
                <table class="min-w-full text-sm border">
                    <thead class="bg-gray-100">
                        <tr>
                            <th class="px-4 py-2 border">Item Name</th>
                            <th class="px-4 py-2 border">Item Method</th>
                            <th class="px-4 py-2 border">Item Result</th>
                            <th class="px-4 py-2 border">Note</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="item : ${workorder.items}">
                            <td class="border px-4 py-2" th:text="${item.itemName}"></td>
                            <td class="border px-4 py-2" th:text="${item.itemMethod}"></td>
                            <td class="border px-4 py-2" th:text="${item.itemResult}"></td>
                            <td class="border px-4 py-2" th:text="${item.note}"></td>
                        </tr>
                        <tr th:if="${#lists.isEmpty(workorder.items)}">
                            <td colspan="4" class="text-center px-4 py-2 border">No items registered.</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="flex justify-end gap-3 print:hidden">
            <a th:href="@{/workorder/workorderList(companyId=${workorder.companyId},siteId=${workorder.siteId})}"
               class="px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600">
               Back to List
            </a>
        </div>

    </div>
</div>
</body>
</html>
